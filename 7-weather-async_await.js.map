{"version":3,"file":"7-weather-async_await.js","sources":["../src/js/weather-async_await/weather-api.js","../src/js/weather-async_await/render-functions.js","../src/js/weather-async_await/weather-main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '@fortawesome/fontawesome-free/css/all.min.css';\n\n// // Функция запроса на бэкенд\n// export function fetchWeather(city, days) {\n//   const BASE_URL = 'https://api.weatherapi.com/v1';\n//   const API_KEY = '09a333eec31b44aab6a163037252406';\n\n//   return fetch(\n//     `${BASE_URL}/forecast.json?key=${API_KEY}&q=${city}&days=${days}&lang=ru`\n//   ).then(response => {\n//     // Если ответ пришёл с ошибкой\n//     if (!response.ok) {\n//       // Вызов нотификации\n//       iziToastOptions(\n//         'Sorry, there is no information matching your search query. Try again!',\n//         'pink'\n//       );\n//       // Создание принудительной ошибки\n//       throw new Error(response.statusText);\n//     }\n//     // Возвращаем из then распарсенный json\n//     return response.json();\n//   });\n// }\n\n// Функция запроса на бэкенд\nexport async function fetchWeather(city, days) {\n  const BASE_URL = 'https://api.weatherapi.com/v1';\n  const API_KEY = '09a333eec31b44aab6a163037252406';\n\n  const response = await fetch(\n    `${BASE_URL}/forecast.json?key=${API_KEY}&q=${city}&days=${days}&lang=ru`\n  );\n\n  if (!response.ok) {\n    // Вызов нотификации\n    iziToastOptions(\n      'Sorry, there is no information matching your search query. Try again!',\n      'pink'\n    );\n\n    // Бросаем ошибку, чтобы её можно было отловить в вызывающем коде\n    throw new Error(`Ошибка ${response.status}: ${response.statusText}`);\n  }\n  return response.json();\n}\n\n// Опции подключенного через библиотеку alert\nfunction iziToastOptions(message, backgroundColor) {\n  return iziToast.show({\n    message,\n    messageColor: '#ff0000',\n    backgroundColor,\n    icon: '\tfa fa-ban',\n    iconColor: '#8b0000',\n    position: 'topRight',\n  });\n}\n","// Функция рендера данных\nexport function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        date,\n        day: {\n          avgtemp_c,\n          condition: { icon, text },\n        },\n      }) => `<li class=\"weather-item\">\n          <img src=\"${icon}\" alt=\"${text}\" class=\"weather-img\">\n          <p>${text}</p>\n          <h2>${date}</h2>\n          <h3>${avgtemp_c} &deg;С</h3>\n        </li>`\n    )\n    .join('');\n}\n","import { fetchWeather } from './weather-api';\nimport { createMarkup } from './render-functions';\nimport '../../css/styles.css';\n\nconst search = document.querySelector('.js-search');\nconst list = document.querySelector('.js-list');\nconst loaderEl = document.querySelector('.loader');\n\nsearch.addEventListener('submit', onSearch);\n\nasync function onSearch(evt) {\n  evt.preventDefault();\n\n  // Очищаем контейнер\n  clearList();\n\n  // Показываем Loader\n  showLoader();\n\n  // Сохраняем в переменные данные из формы\n  const { query, days } = evt.currentTarget.elements;\n\n  try {\n    // Получаем данные c бэкенда\n    const data = await fetchWeather(query.value.trim(), days.value);\n\n    // Создаём карточки с данными из бэкенда\n    list.innerHTML = createMarkup(data.forecast.forecastday);\n\n    // Очищаем инпут\n    search.reset();\n  } catch (error) {\n    console.log('Ошибка при получении данных:', error);\n  } finally {\n    // Скрываем Loader\n    hideLoader();\n  }\n}\n\n// Функция очистки контейнера галереи\nfunction clearList() {\n  list.innerHTML = '';\n}\n\n// Функция отображения Loader\nfunction showLoader() {\n  loaderEl.classList.add('active');\n}\n\n// Функция скрывания Loader\nfunction hideLoader() {\n  loaderEl.classList.remove('active');\n}\n"],"names":["fetchWeather","city","days","response","iziToastOptions","message","backgroundColor","iziToast","createMarkup","arr","date","avgtemp_c","icon","text","search","list","loaderEl","onSearch","evt","clearList","showLoader","query","data","error","hideLoader"],"mappings":"oFA4BO,eAAeA,EAAaC,EAAMC,EAAM,CAI7C,MAAMC,EAAW,MAAM,MACrB,qFAA8CF,CAAI,SAASC,CAAI,UAChE,EAED,GAAI,CAACC,EAAS,GAEZ,MAAAC,EACE,wEACA,MACD,EAGK,IAAI,MAAM,UAAUD,EAAS,MAAM,KAAKA,EAAS,UAAU,EAAE,EAErE,OAAOA,EAAS,KAAM,CACxB,CAGA,SAASC,EAAgBC,EAASC,EAAiB,CACjD,OAAOC,EAAS,KAAK,CACnB,QAAAF,EACA,aAAc,UACd,gBAAAC,EACA,KAAM,aACN,UAAW,UACX,SAAU,UACd,CAAG,CACH,CC1DO,SAASE,EAAaC,EAAK,CAChC,OAAOA,EACJ,IACC,CAAC,CACC,KAAAC,EACA,IAAK,CACH,UAAAC,EACA,UAAW,CAAE,KAAAC,EAAM,KAAAC,CAAM,CAC1B,CACT,IAAY;AAAA,sBACUD,CAAI,UAAUC,CAAI;AAAA,eACzBA,CAAI;AAAA,gBACHH,CAAI;AAAA,gBACJC,CAAS;AAAA,cAEzB,EACK,KAAK,EAAE,CACZ,CCdA,MAAMG,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAW,SAAS,cAAc,SAAS,EAEjDF,EAAO,iBAAiB,SAAUG,CAAQ,EAE1C,eAAeA,EAASC,EAAK,CAC3BA,EAAI,eAAgB,EAGpBC,EAAW,EAGXC,EAAY,EAGZ,KAAM,CAAE,MAAAC,EAAO,KAAAnB,CAAM,EAAGgB,EAAI,cAAc,SAE1C,GAAI,CAEF,MAAMI,EAAO,MAAMtB,EAAaqB,EAAM,MAAM,KAAM,EAAEnB,EAAK,KAAK,EAG9Da,EAAK,UAAYP,EAAac,EAAK,SAAS,WAAW,EAGvDR,EAAO,MAAO,CACf,OAAQS,EAAO,CACd,QAAQ,IAAI,+BAAgCA,CAAK,CACrD,QAAY,CAERC,EAAY,CAChB,CACA,CAGA,SAASL,GAAY,CACnBJ,EAAK,UAAY,EACnB,CAGA,SAASK,GAAa,CACpBJ,EAAS,UAAU,IAAI,QAAQ,CACjC,CAGA,SAASQ,GAAa,CACpBR,EAAS,UAAU,OAAO,QAAQ,CACpC"}