{"version":3,"file":"3-cat-info.js","sources":["../src/js/cat-info/cat-api.js","../src/js/cat-info/render-functions.js","../src/js/cat-info/cat-info-main.js"],"sourcesContent":["import axios from 'axios';\n\nconst myApiKey =\n  'live_ gCrMzxVedQewgspyzOBQIG2uzIc7uX ZZLlOa2KWOyd9IsmmF2onJcOmaXJlO sQfP';\n\naxios.defaults.headers.common['x-api-key'] = myApiKey;\n\nconst BASE_URL = 'https://api.thecatapi.com/v1/';\n// Функция запроса на бэкенд всех пород кошек\nasync function fetchBreeds() {\n  const response = await axios.get(`${BASE_URL}breeds`);\n  return response.data;\n}\n\n// Функция запроса на бэкенд одной породы кошки, ожидающая получить аргументом Id породы\nasync function fetchBreedInfo(breedId) {\n  const response = await axios.get(`${BASE_URL}breeds/${breedId}`);\n  return response.data;\n}\n\n// Функция запроса на бэкенд фотографии кошеки, ожидающая получить аргументом Id породы\nasync function fetchCatByBreed(breedId) {\n  const response = await axios.get(\n    `${BASE_URL}images/search?breed_ids=${breedId}`\n  );\n  return response;\n}\n\n// Именованный экспорт всех функций\nexport { fetchBreeds, fetchBreedInfo, fetchCatByBreed };\n","// Именованный импорт\nimport { fetchBreedInfo } from './cat-api';\n\n// Получаем в переменную HTML-элемент loader\nconst loaderEl = document.querySelector('.loader');\n\n// Функция создания списка всех пород кошек\nfunction createSelect(breeds, breedSelect) {\n  // Отображаем HTML-элемент списка\n  breedSelect.classList.remove('is-hidden');\n\n  // Перебераем через forEach полученный из запросак массив объектов\n  // и отображаем имена пород в списке\n  breeds.forEach(breed => {\n    const option = document.createElement('option');\n    option.value = breed.id;\n    option.textContent = breed.name;\n    breedSelect.appendChild(option);\n  });\n}\n\n// Функция отображения информации о выбранной породе\nasync function createInfo(card, breedSelect, infoContainer, iziToastOptions) {\n  // Сохраняем в перменную объект полученный из запроса\n  const cat = card.data[0];\n\n  try {\n    // Получаем информацию о породе\n    const breed = await fetchBreedInfo(breedSelect.value);\n\n    // Создаём разметку карточки\n    const cardMarkup = `\n  <div class=\"cat-card\">\n    <img src=\"${cat.url}\" alt=\"${breed.name}\" class=\"cat-img\" />\n    <div class=\"cat-description\">\n      <h2>${breed.name}</h2>\n      <p><strong>Temperament:</strong> ${breed.temperament}</p>\n      <p><strong>Description:</strong> ${breed.description}</p>\n    </div>\n  </div>\n      `;\n    // Отображаем контейнер\n    infoContainer.classList.remove('is-hidden');\n\n    // Добавляем в контейнер нашу карточку\n    infoContainer.innerHTML = cardMarkup;\n  } catch (error) {\n    // обработка ошибки\n    iziToastOptions(error);\n  }\n}\n\n// Функция отображения Loader\nfunction showLoader() {\n  loaderEl.classList.add('active');\n}\n\n// Функция скрывания Loader\nfunction hideLoader() {\n  loaderEl.classList.remove('active');\n}\n\n// Именованный экспорт всех функций\nexport { createSelect, createInfo, showLoader, hideLoader };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '@fortawesome/fontawesome-free/css/all.min.css';\n// Именованный импорт\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\n// Именованный импорт\nimport {\n  createSelect,\n  createInfo,\n  showLoader,\n  hideLoader,\n} from './render-functions';\nimport '../../css/styles.css';\n\n// Получаем в переменную HTML-элемент списка\nconst breedSelect = document.querySelector('.breed-select');\n\n// Получаем в переменную контейнер для рендера информации\nconst infoContainer = document.querySelector('.cat-info');\n\n// Вешаем слушатель события change на HTML-элемент списка\nbreedSelect.addEventListener('change', onBreedSelect);\n\n// Скрываем HTML-элемент списка\nbreedSelect.classList.add('is-hidden');\n\n// Отображения loader\nshowLoader();\n\nasync function handleBreeds() {\n  try {\n    const response = await fetchBreeds();\n    createSelect(response, breedSelect);\n  } catch (error) {\n    // Отображаем сообщение об ошибке\n    iziToastOptions(error);\n\n    // Скрываем HTML-элемент списка\n    breedSelect.classList.add('is-hidden');\n  } finally {\n    // Скрываем Loader\n    hideLoader();\n  }\n}\nhandleBreeds();\n\n// Обработчик слушателя события\nasync function onBreedSelect() {\n  // Скрываем контейнер\n  infoContainer.classList.add('is-hidden');\n\n  // Отображения loader\n  showLoader();\n\n  // Получаем в переменную значение выбранное из списка\n  const selectedCatId = breedSelect.value;\n  try {\n    // Реализация запроса породы кошки по значению выбранному из списка,\n    const response = await fetchCatByBreed(selectedCatId);\n    // Отображение данных\n    createInfo(response, breedSelect, infoContainer, iziToastOptions);\n  } catch (error) {\n    // Отображаем сообщение об ошибке\n    iziToastOptions(error);\n  } finally {\n    // Скрываем Loader\n    hideLoader();\n  }\n}\n\n// Опции подключенного через библиотеку alert\nfunction iziToastOptions() {\n  return iziToast.show({\n    message: 'Oops! Something went wrong! Try reloading the page!',\n    messageColor: 'white',\n    backgroundColor: 'red',\n    icon: '\tfa fa-ban',\n    iconColor: '#8b0000',\n    position: 'topRight',\n  });\n}\n"],"names":["myApiKey","axios","BASE_URL","fetchBreeds","fetchBreedInfo","breedId","fetchCatByBreed","loaderEl","createSelect","breeds","breedSelect","breed","option","createInfo","card","infoContainer","iziToastOptions","cat","cardMarkup","error","showLoader","hideLoader","onBreedSelect","handleBreeds","response","selectedCatId","iziToast"],"mappings":"2FAEA,MAAMA,EACJ,2EAEFC,EAAM,SAAS,QAAQ,OAAO,WAAW,EAAID,EAE7C,MAAME,EAAW,gCAEjB,eAAeC,GAAc,CAE3B,OADiB,MAAMF,EAAM,IAAI,GAAGC,CAAQ,QAAQ,GACpC,IAClB,CAGA,eAAeE,EAAeC,EAAS,CAErC,OADiB,MAAMJ,EAAM,IAAI,GAAGC,CAAQ,UAAUG,CAAO,EAAE,GAC/C,IAClB,CAGA,eAAeC,EAAgBD,EAAS,CAItC,OAHiB,MAAMJ,EAAM,IAC3B,GAAGC,CAAQ,2BAA2BG,CAAO,EAC9C,CAEH,CCtBA,MAAME,EAAW,SAAS,cAAc,SAAS,EAGjD,SAASC,EAAaC,EAAQC,EAAa,CAEzCA,EAAY,UAAU,OAAO,WAAW,EAIxCD,EAAO,QAAQE,GAAS,CACtB,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQD,EAAM,GACrBC,EAAO,YAAcD,EAAM,KAC3BD,EAAY,YAAYE,CAAM,CAClC,CAAG,CACH,CAGA,eAAeC,EAAWC,EAAMJ,EAAaK,EAAeC,EAAiB,CAE3E,MAAMC,EAAMH,EAAK,KAAK,CAAC,EAEvB,GAAI,CAEF,MAAMH,EAAQ,MAAMP,EAAeM,EAAY,KAAK,EAG9CQ,EAAa;AAAA;AAAA,gBAEPD,EAAI,GAAG,UAAUN,EAAM,IAAI;AAAA;AAAA,YAE/BA,EAAM,IAAI;AAAA,yCACmBA,EAAM,WAAW;AAAA,yCACjBA,EAAM,WAAW;AAAA;AAAA;AAAA,QAKtDI,EAAc,UAAU,OAAO,WAAW,EAG1CA,EAAc,UAAYG,CAC3B,OAAQC,EAAO,CAEdH,EAAgBG,CAAK,CACzB,CACA,CAGA,SAASC,GAAa,CACpBb,EAAS,UAAU,IAAI,QAAQ,CACjC,CAGA,SAASc,GAAa,CACpBd,EAAS,UAAU,OAAO,QAAQ,CACpC,CC7CA,MAAMG,EAAc,SAAS,cAAc,eAAe,EAGpDK,EAAgB,SAAS,cAAc,WAAW,EAGxDL,EAAY,iBAAiB,SAAUY,CAAa,EAGpDZ,EAAY,UAAU,IAAI,WAAW,EAGrCU,EAAY,EAEZ,eAAeG,GAAe,CAC5B,GAAI,CACF,MAAMC,EAAW,MAAMrB,EAAa,EACpCK,EAAagB,EAAUd,CAAW,CACnC,MAAe,CAEdM,EAAqB,EAGrBN,EAAY,UAAU,IAAI,WAAW,CACzC,QAAY,CAERW,EAAY,CAChB,CACA,CACAE,EAAc,EAGd,eAAeD,GAAgB,CAE7BP,EAAc,UAAU,IAAI,WAAW,EAGvCK,EAAY,EAGZ,MAAMK,EAAgBf,EAAY,MAClC,GAAI,CAEF,MAAMc,EAAW,MAAMlB,EAAgBmB,CAAa,EAEpDZ,EAAWW,EAAUd,EAAaK,EAAeC,CAAe,CACjE,MAAe,CAEdA,EAAqB,CACzB,QAAY,CAERK,EAAY,CAChB,CACA,CAGA,SAASL,GAAkB,CACzB,OAAOU,EAAS,KAAK,CACnB,QAAS,sDACT,aAAc,QACd,gBAAiB,MACjB,KAAM,aACN,UAAW,UACX,SAAU,UACd,CAAG,CACH"}